# 17_성능최적화: 속도와 안정성 가이드

데이터 양이 많아지거나 복잡도가 증가할 때 n8n 워크플로우를 안정적으로 유지하는 방법을 배웁니다.

---

## 1. 데이터 처리 최적화

### 데이터 최소화 (Data Reduction)
- **필요한 것만 가져오기**: API 호출 시 쿼리 파라미터를 사용하여 필요한 필드만 요청하세요.
- **중간 데이터 삭제**: 워크플로우 중간에 더 이상 필요 없는 큰 데이터는 `Set` 노드의 `Keep Only Set` 옵션을 사용하여 메모리에서 제거하세요.

### 배치 처리 (Batch Processing)
- **Split In Batches**: 수천 개의 데이터를 한 번에 처리하면 타임아웃이나 메모리 초과가 발생할 수 있습니다. 50~100개 단위로 나누어 처리하세요.
- **Wait 노드 활용**: API Rate Limit(호출 제한)을 피하기 위해 반복 사이사이에 적절한 지연 시간을 추가하세요.

---

## 2. 시스템 자원 관리

### 메모리 관리
- n8n은 기본적으로 실행 데이터를 메모리에 유지합니다.
- 매우 큰 파일을 다룰 때는 파일 경로만 전달하고, 필요한 시점에만 `Read Binary File`로 읽으세요.

### 실행 로그 최적화
- **Save Executions**: 성공한 실행 기록을 무조건 저장하면 DB 용량이 금방 찹니다. "Error Only"로 설정하거나 자동 삭제 주기(Pruning)를 짧게 설정하세요.
- `N8N_EXECUTIONS_DATA_PRUNE=true` 환경 변수를 설정하여 주기적으로 DB를 정리하세요.

---

## 3. 확장성 설계 (Scalability)

### 워커(Worker) 모드
- 싱글 프로세스로 부족할 경우, `Queue Mode`를 활성화하여 Redis와 여러 개의 Worker 노드를 사용할 수 있습니다.
- 이는 수많은 워크플로우가 동시에 실행되어야 하는 엔터프라이즈 환경에서 필수적입니다.

### 외부 서비스 활용
- 무거운 연산(복잡한 이미지 처리, 대량의 데이터 분석)은 n8n 내부의 `Code` 노드보다는 외부 API나 전용 파이썬 스크립트(`Execute Command`)로 분리하는 것이 서버 부하 관리에 유리합니다.

---

## 🔗 링크
- **[18_문제해결가이드.md](18_문제해결가이드.md)**: 다음 단계
- **[README.md](README.md)**: 메인 가이드로 돌아가기
