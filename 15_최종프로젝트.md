# 최종 프로젝트: AI 기반 콘텐츠 자동 생성 시스템

> 모든 학습을 종합한 최고 난이도 프로젝트입니다.
> Claude API + n8n을 완벽하게 활용합니다.
> 예상 완성 시간: 3시간

## 프로젝트 개요

### 최종 목표
```
매일 주제를 받아서
→ 블로그 포스트 제목 생성
→ 포스트 본문 작성
→ 이미지 생명어(이미지 설명) 생성
→ SNS 요약문 작성
→ 메타데이터 생성
→ 모든 콘텐츠를 정리해서 저장 및 발송
```

### 최종 산출물 예시
```
📝 자동 생성 콘텐츠

제목: "n8n으로 처음 자동화 시작하기"

본문:
n8n은 코딩 없이 자동화할 수 있는 강력한 도구입니다...
[약 500-1000자]

이미지 설명:
노트북에서 n8n 워크플로우를 설계하는 개발자의 모습

SNS 요약:
🚀 n8n으로 업무 자동화 시작! 
클릭 한 번으로 수동 작업을 자동화하세요.
#n8n #자동화 #개발자

메타데이터:
- 태그: n8n, 자동화, 개발
- 카테고리: 기술
- 난이도: 초급
- 읽기시간: 8분
```

---

## 단계 1: 아키텍처 설계

### 전체 흐름

```
┌─ Trigger: Webhook 또는 Schedule
│
├─ 입력 데이터 준비
│  └─ Topic 준비 (예: "n8n 소개")
│
├─ Claude AI - 단계별 콘텐츠 생성
│  ├─ ① 제목 생성
│  ├─ ② 본문 작성
│  ├─ ③ 이미지 설명 생성
│  ├─ ④ SNS 요약 작성
│  └─ ⑤ 메타데이터 생성
│
├─ 데이터 통합
│  └─ 모든 결과를 하나로 합치기
│
├─ 저장 및 발송
│  ├─ Database 저장
│  ├─ Slack 알림
│  └─ 이메일 발송
│
└─ 완료
```

---

## 단계 2: 노드 구성

### 2.1 트리거

**Webhook 또는 Schedule**

```
설정 (Webhook):
- Method: POST
- 요청 본문: {"topic": "주제명"}

또는 Schedule:
- 매일 오전 10시 실행
- 고정 주제 사용
```

### 2.2 데이터 준비 (Set)

```json
{
  "topic": "{{ $json.body.topic || '최신 기술 트렌드' }}",
  "author": "AI Content Generator",
  "platform": "n8n",
  "created_at": "{{ now() }}",
  "content_type": "blog_post"
}
```

### 2.3 단계 1: 제목 생성 (Claude)

```json
메서드: POST
URL: https://api.anthropic.com/v1/messages

Body:
{
  "model": "claude-3-5-sonnet-20241022",
  "max_tokens": 100,
  "system": "당신은 블로그 제목 작성 전문가입니다. 매력적이고 클릭을 유도하는 제목을 만드세요.",
  "messages": [
    {
      "role": "user",
      "content": "다음 주제로 블로그 제목을 지으세요: {{ $json.topic }}"
    }
  ]
}
```

**결과 처리 (Set):**
```json
{
  "title": "{{ $json.body.content[0].text }}"
}
```

### 2.4 단계 2: 본문 작성 (Claude)

```json
Body:
{
  "model": "claude-3-5-sonnet-20241022",
  "max_tokens": 2048,
  "system": "당신은 전문 블로거입니다. 개발자 대상의 명확하고 유용한 콘텐츠를 작성합니다.",
  "messages": [
    {
      "role": "user",
      "content": "다음 주제로 700-1000자 분량의 블로그 포스트 본문을 작성해주세요:\n\n주제: {{ $json.topic }}\n제목: {{ $node['제목생성'].json.title }}\n\n구조:\n1. 소개\n2. 주요 내용 (3-5개 포인트)\n3. 실제 예시\n4. 결론\n\nMarkdown 형식으로 작성해주세요."
    }
  ]
}
```

**결과 처리:**
```json
{
  "body": "{{ $json.body.content[0].text }}"
}
```

### 2.5 단계 3: 이미지 설명 생성 (Claude)

```json
Body:
{
  "model": "claude-3-5-sonnet-20241022",
  "max_tokens": 150,
  "system": "당신은 이미지 설명(Alt text) 작성 전문가입니다. 명확하고 검색 최적화된 설명을 만드세요.",
  "messages": [
    {
      "role": "user",
      "content": "다음 주제의 블로그에 들어갈 이미지의 설명을 작성해주세요:\n\n주제: {{ $json.topic }}\n제목: {{ $node['제목생성'].json.title }}\n\n이미지 설명은:\n- 30-60자 이내\n- 이미지의 주요 요소 설명\n- 주제와 관련\n\nMarkdown 형식의 설명이 아닌 순수 텍스트만 반환하세요."
    }
  ]
}
```

### 2.6 단계 4: SNS 요약 작성 (Claude)

```json
Body:
{
  "model": "claude-3-5-sonnet-20241022",
  "max_tokens": 200,
  "system": "당신은 SNS 마케팅 전문가입니다. 매력적이고 공유 가능한 SNS 포스트를 만드세요.",
  "messages": [
    {
      "role": "user",
      "content": "다음 블로그 포스트를 위한 SNS 요약을 작성해주세요:\n\n제목: {{ $json.title }}\n본문: {{ $json.body }}\n\nSNS 포스트 요구사항:\n- 140자 이내\n- 이모지 포함\n- 해시태그 3-5개 포함\n- 클릭 유도 CTA 포함\n\nTwitter/X 형식으로 작성하세요."
    }
  ]
}
```

### 2.7 단계 5: 메타데이터 생성 (Claude)

```json
Body:
{
  "model": "claude-3-5-sonnet-20241022",
  "max_tokens": 300,
  "system": "당신은 SEO 메타데이터 작성 전문가입니다. 구조화된 데이터를 생성합니다.",
  "messages": [
    {
      "role": "user",
      "content": "다음 블로그 포스트의 메타데이터를 JSON 형식으로 생성해주세요:\n\n제목: {{ $json.title }}\n본문: {{ $json.body }}\n주제: {{ $json.topic }}\n\n다음 항목들을 포함하세요:\n{\n  \"meta_description\": \"SEO용 설명 (155-160자)\",\n  \"keywords\": [\"키워드1\", \"키워드2\", ...],\n  \"tags\": [\"태그1\", \"태그2\", ...],\n  \"category\": \"카테고리\",\n  \"reading_time_minutes\": 8,\n  \"difficulty\": \"초급/중급/고급\"\n}\n\nJSON만 반환하세요."
    }
  ]
}
```

**결과 처리:**
```javascript
// Set 노드에서 JSON 파싱
{{ JSON.parse($json.body.content[0].text) }}
```

### 2.8 최종 통합 (Merge)

모든 결과를 하나의 객체로 합치기:

```json
{
  "content": {
    "topic": "{{ $json.topic }}",
    "created_at": "{{ $json.created_at }}",
    "title": "{{ $node['제목생성'].json.title }}",
    "body": "{{ $node['본문작성'].json.body }}",
    "image_alt": "{{ $node['이미지설명'].json.image_alt }}",
    "social_post": "{{ $node['SNS요약'].json.social }}",
    "metadata": "{{ $node['메타데이터'].json.metadata }}"
  }
}
```

### 2.9 데이터 저장 (Database)

PostgreSQL 또는 MySQL에 저장:

```
Table: blog_posts
- id (UUID)
- topic (Text)
- title (Text)
- body (Text)
- image_alt (Text)
- social_post (Text)
- metadata (JSON)
- created_at (Timestamp)
- status (publish/draft)
```

### 2.10 알림 발송

#### Slack 알림

```json
Body:
{
  "text": "✨ 새로운 블로그 포스트 자동 생성 완료!",
  "attachments": [
    {
      "color": "#36a64f",
      "title": "{{ $json.content.title }}",
      "text": "{{ $json.content.social_post }}",
      "fields": [
        {
          "title": "주제",
          "value": "{{ $json.content.topic }}",
          "short": true
        },
        {
          "title": "읽기시간",
          "value": "{{ $json.content.metadata.reading_time_minutes }}분",
          "short": true
        }
      ],
      "footer": "AI Content Generator"
    }
  ]
}
```

#### 이메일 발송

```
To: your@email.com
Subject: 새 블로그 포스트 생성 완료: {{ $json.content.title }}

Body (HTML):
<h2>{{ $json.content.title }}</h2>
<p>{{ $json.content.body }}</p>
<hr>
<h3>SNS 공유용:</h3>
<p>{{ $json.content.social_post }}</p>
<hr>
<p>메타데이터: ...</p>
```

---

## 단계 3: 워크플로우 구현

### 요약 구조

```
1. Webhook (입력)
   ↓
2. Set (데이터 준비)
   ↓
3. Set (제목 생성 - Claude)
   ↓
4. Set (본문 작성 - Claude)
   ↓
5. Set (이미지 설명 - Claude)
   ↓
6. Set (SNS 요약 - Claude)
   ↓
7. Set (메타데이터 - Claude)
   ↓
8. Merge (모두 통합)
   ↓
9. Database (저장)
   ↓
10. Slack (알림)
    ↓
11. Email (이메일)
```

---

## 단계 4: 고급 기능

### 4.1 에러 처리

```
Try-Catch 블록:
- 각 Claude 호출 주위에 배치
- 실패 시: 재시도 또는 알림
- 성공 시: 계속 진행
```

### 4.2 캐싱

같은 주제 중복 방지:

```
Database 쿼리:
SELECT * FROM blog_posts 
WHERE topic = '{{ $json.topic }}' 
AND created_at > NOW() - INTERVAL 30 DAY

결과:
- 있으면: 스킵
- 없으면: 생성
```

### 4.3 품질 검사

```
Claude에게 생성된 콘텐츠 품질 평가:
"다음 블로그 포스트가 전문가 수준인지 평가해줘. 점수: 1-10"
- 점수 < 7: 재생성
- 점수 >= 7: 승인
```

### 4.4 버전 관리

```
각 생성된 콘텐츠의 버전 추적:
- Version 1: 초기 생성
- Version 2: 개선 1
- Version 3: 최종

변경 이력 저장
```

---

## 단계 5: 테스트

### 5.1 기본 테스트

```bash
# Webhook 호출
curl -X POST http://localhost:5678/webhook/[id] \
  -H "Content-Type: application/json" \
  -d '{
    "topic": "AI와 자동화의 미래"
  }'
```

### 5.2 각 단계별 테스트

1. 데이터 준비 완료
2. 각 Claude 호출 성공
3. 데이터 통합 완료
4. 데이터베이스 저장 완료
5. Slack/Email 발송 완료

### 5.3 결과 검증

```
생성된 콘텐츠 확인:
✅ 제목: 명확하고 매력적
✅ 본문: 500-1000자, 잘 구조화
✅ 이미지 설명: 30-60자, 명확
✅ SNS: 140자, 이모지+해시태그 포함
✅ 메타데이터: 올바른 JSON 형식
```

---

## 단계 6: 배포

### 6.1 프로덕션 설정

```
환경 변수:
- CLAUDE_API_KEY=sk-ant-...
- DATABASE_URL=postgresql://...
- SLACK_WEBHOOK_URL=https://hooks.slack.com/...
- EMAIL_FROM=noreply@example.com
```

### 6.2 스케줄링

```
매일 특정 시간 실행:
- 옵션 1: Schedule 노드 (n8n 자체 스케줄)
- 옵션 2: 외부 트리거 (다른 시스템에서 호출)
```

### 6.3 모니터링

```
n8n Executions에서:
- 일일 실행 확인
- 에러 확인
- 생성된 콘텐츠 통계
```

---

## 단계 7: 확장 기능

### 7.1 멀티 플랫폼 배포

```
생성된 콘텐츠를 다양한 플랫폼에 배포:
- Blog: 블로그 게시
- Medium: Medium.com 게시
- LinkedIn: LinkedIn 포스트
- Twitter/X: 트윗 발송
```

### 7.2 A/B 테스팅

```
제목 10가지 생성 → 각각 CTR 측정 → 최고 성능 선택
본문 2가지 버전 → 사용자 반응 비교
```

### 7.3 기계학습 피드백

```
사용자 피드백 수집:
- 좋아요/싫어요
- 댓글
- 공유 수

이를 바탕으로 프롬프트 개선
```

---

## 체크리스트

최종 프로젝트 완료 확인:

- [ ] Webhook으로 입력 받기 성공
- [ ] Claude 5단계 콘텐츠 생성 완료
- [ ] 모든 결과 통합 완료
- [ ] 데이터베이스 저장 성공
- [ ] Slack 알림 발송
- [ ] 이메일 발송 완료
- [ ] 에러 처리 구현
- [ ] 테스트 완료
- [ ] 프로덕션 배포 완료

모든 체크를 완료했다면, **축하합니다! 🎉**

당신은 이제 n8n 전문가입니다!

---

## 다음 단계

이제 당신 자신의 프로젝트를 만들 시간입니다:

1. **자신의 비즈니스 니즈** 정의
2. **n8n으로 자동화** 설계
3. **구현 및 테스트**
4. **배포 및 모니터링**

또는 [16_베스트프랙티스.md]에서 프로덕션 배포 가이드를 읽으세요!
